# BCDB


## BCDB pre-requirements
BCDB uses zdb that is always running on local host ZDB must be running in `sequential` mode. Please check out [0-db](https://github.com/threefoldtech/0-db) for more information on how to install `zdb`.

```bash
zdb --mode seq
```

## Starting up BCDB
- Build bcdb
```bash
make
```
- check available options
```bash
# bcdb --help
bcdb

USAGE:
    bcdb [FLAGS] [OPTIONS] --threebot-id <id> --seed <seed> --seed-file <seed-file>

FLAGS:
    -d, --debug      enable debug logging
    -h, --help       Prints help information
    -V, --version    Prints version information

OPTIONS:
        --explorer <explorer>        explorer URL for phonebook entries validations [default:
                                     https://explorer.devnet.grid.tf/explorer/]
    -i, --threebot-id <id>           threebot ID for this bcdb instance
    -l, --listen <listen>            listen on address [default: [::1]:50051]
    -m, --meta <meta>                directory where metadata is stored [default: /home/azmy/.bcdb-meta]
        --peers-file <peers-file>    path to file with peers list, otherwise use explorer [env: PEERS_FILE=]
    -s, --seed <seed>                mnemonic of the seed to be used for the identity [env: SEED=]
        --seed-file <seed-file>      path to the file containing the mnemonic [env: seed-file=]
    -z, --zdb <zdb>                  local zdb port [default: 9900]

```

> Please make sure that `--seed-file` is pointing to a seed file generated by the `tfuser` utility.

> Instead, you can provide both `--threebot-id` and `--seed` which must be valid identity registered on the provided `explorer`

## playing with bcdb
BCDB exposes a grpc service(s). We already have some clients generated (with some examples) please check `clients` directory.
In case there is no client generated in your preferred language, use the `proto/bcdb.proto` to generate one.

### Example
Please check `examples` for some example clients that uses bcdb for specific operations.


# Checklist
- [x] Set new object
- [x] Get object with ID
- [x] List objects that matches set of tags
- [x] Find objects that matches set of tags
  - find is similar to list, except `list` only returns object IDs, while `find` also return object full meta
- [x] Update object meta with ID
- [ ] Authentication
  - [ ] Specifications
- [x] ACL
  - [x] Assign ACL to object on Set
  - [x] Configure ACL (grant, revoke, and update permissions)
  - [x] Check user access request against associated ACL
- [ ] Peer 2 Peer
  - [x] Routing calls to peers
  - [x] Peers list
    - [x] Peers files
    - [x] Explorer
  - [ ] Peer verification
  - [ ] Peer connection pooling
